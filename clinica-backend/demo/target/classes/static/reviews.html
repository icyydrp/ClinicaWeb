<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reseñas de Pacientes - Clínica Señor de Luren</title>
    <link rel="stylesheet" href="css/reviews.css">
    <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Satoshi:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="logo">
            <a href="Nosotros.html">
                <img src="images/logo clinica señor de Luren.png" alt="Logo de la Clínica">
            </a>
        </div>
        <ul class="nav-menu">
            <li><a href="paginainicio.html">INICIO</a></li>
            <li><a href="servicios.html">SERVICIOS</a></li>
            <li><a href="especialidades.html">ESPECIALIDADES</a></li>
            <li><a href="reviews.html" class="active">REVIEWS</a></li>
            <li><a href="noticias.html">NOTICIAS</a></li>
            <li><a href="contactos.html">CONTACTOS</a></li>
            <li><a href="agendarCita.html">RESERVAS</a></li>
        </ul>
    </header>

    <section class="review-section">
        <div class="review-container">
            <!-- Formulario a la izquierda -->
            <div class="review-form-container">
                <h2>Escribe una Reseña</h2>
                <form id="review-form" class="review-form">
                    <input 
                        type="text" 
                        id="review-name" 
                        name="nombrePaciente" 
                        placeholder="Tu nombre" 
                        required
                    >
                
                    <select id="doctor-select" name="nombreDoctor" required>
                        <option value="" disabled selected>Seleccione un doctor</option>
                        <option value="Bregu Sarmiento Cielo">Bregu Sarmiento Cielo</option>
                        <option value="Alvarez Taboada">Alvarez Taboada</option>
                        <option value="Anchante Gongora Norma Elizabeth">Anchante Gongora Norma Elizabeth</option>
                        <!-- Más opciones... -->
                    </select>
                
                    <select id="specialty-select" name="especialidad" required>
                        <option value="" disabled selected>Seleccione una especialidad</option>
                        <option value="Cardiología">Cardiología</option>
                        <option value="Neurología">Neurología</option>
                        <option value="Oftalmología">Oftalmología</option>
                        <option value="Dermatología">Dermatología</option>
                        <!-- Más especialidades... -->
                    </select>
                
                    <select id="review-rating" name="calificacion" required>
                        <option value="5">5 - Excelente</option>
                        <option value="4">4 - Muy bueno</option>
                        <option value="3">3 - Bueno</option>
                        <option value="2">2 - Regular</option>
                        <option value="1">1 - Malo</option>
                    </select>
                
                    <textarea 
                        id="review-text" 
                        name="comentario" 
                        placeholder="Escribe tu reseña aquí..." 
                        rows="4" 
                        required
                    ></textarea>
                
                    <button type="submit">Enviar Reseña</button>
                </form>
            </div>

            <!-- Reseñas a la derecha -->
            <div class="reviews-list-container">
                <h2>Reseñas de Pacientes</h2>
                <ul id="reviews-list">
                    <!-- Aquí se mostrarán las reseñas cargadas -->
                </ul>
            </div>
        </div>
    </section>

    <footer class="footer">
        <p>Emergencias: 955223631 | Citas: 955401599 | Ubicación: Av. San Martín #536</p>
        <p>Clínica Señor de Luren - Todos los derechos reservados © 2024</p>
    </footer>

    <!-- Link a Font Awesome para los íconos -->

    <script>
document.getElementById("review-form").addEventListener("submit", function(event) {
    event.preventDefault();

    const reviewData = {
        nombrePaciente: document.getElementById("review-name").value.trim(),
        nombreDoctor: document.getElementById("doctor-select").value,
        especialidad: document.getElementById("specialty-select").value,
        calificacion: parseInt(document.getElementById("review-rating").value),
        comentario: document.getElementById("review-text").value.trim()
    };

    console.log("Datos enviados:", reviewData);  // Verificar los datos en la consola

    fetch("http://localhost:8080/api/reviews/add", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(reviewData)
    })
    .then(response => {
        if (!response.ok) {
            return response.text().then(text => { throw new Error(text) });
        }
        return response.json();
    })
    .then(data => {
        console.log("Respuesta del servidor:", data);
        const newReview = document.createElement("li");
        newReview.innerHTML = `
            <strong>${data.nombrePaciente}</strong> - 
            <em>${data.calificacion} estrellas</em> 
            (${data.nombreDoctor}, ${data.especialidad})
            <p>${data.comentario}</p>
        `;
        document.getElementById("reviews-list").prepend(newReview);
        document.getElementById("review-form").reset();
        alert("Reseña enviada con éxito.");
    })
    .catch(error => {
        console.error("Error:", error);
        alert("Hubo un problema al enviar la reseña.");
    });
});


    </script>
</body>
</html>
